{% extends "base.html" %}

{% block title %}Produtos{% endblock %}

{% block header %}
Produtos
{% endblock %}

{% block content %}

<div class="card">

    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
        <strong>Lista de Produtos</strong>

        <a href="{{ url_for('novo_produto') }}" style="
            background:#020617;
            color:#fff;
            text-decoration:none;
            padding:10px 14px;
            border-radius:8px;
            font-size:14px;
        ">
            + Novo Produto
        </a>
    </div>

    {% if produtos %}
    <table style="width:100%;border-collapse:collapse;">
        <thead>
            <tr style="background:#f1f5f9;text-align:left;">
                <th style="padding:10px;">ID</th>
                <th style="padding:10px;">Nome</th>
                <th style="padding:10px;">Preço</th>
                <th style="padding:10px;">Quantidade</th>
                <th style="padding:10px;">Ações</th>
                <th style="padding:10px;">Imagem</th>

            </tr>
        </thead>
        <tbody>
            {% for p in produtos %}
            <tr style="border-bottom:1px solid #e5e7eb;">
                <td style="padding:10px;">{{ p.id }}</td>
                <td style="padding:10px;">{{ p.nome }}</td>
                <td style="padding:10px;">R$ {{ "%.2f"|format(p.preco) }}</td>
                <td style="padding:10px;">{{ p.quantidade }}</td>

                <td style="padding:10px;">
                    <a href="{{ url_for('editar_produto', id=p.id) }}"
                    style="color:#2563eb;text-decoration:none;">
                        Editar
                    </a>

                    <form action="{{ url_for('excluir_produto', id=p.id) }}"
                        method="POST"
                        onsubmit="return confirm('Tem certeza que deseja excluir este produto?');"
                        style="display:inline;">
                        <button type="submit"
                                style="background:none;border:none;color:#dc2626;cursor:pointer;">
                            Excluir
                        </button>
                    </form>
                </td>

                <td style="padding:10px;">
                    {% if p.imagem %}
                        <img 
                            src="{{ url_for('static', filename='uploads/' ~ p.imagem) }}"
                            alt="Imagem do produto"
                            style="width:60px;height:60px;object-fit:cover;border-radius:6px;"
                        >
                    {% else %}
                        <span style="color:#9ca3af;">Sem imagem</span>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>

    </table>
    {% else %}
        <p>Nenhum produto cadastrado.</p>
    {% endif %}

</div>

{% endblock %}
